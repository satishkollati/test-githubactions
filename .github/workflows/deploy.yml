name: build and test code
on:
   push:
    branchs:
         - main
   workflow-dispatch:      
jobs:
     build:
        runs-on: ubuntu-latest
        steps:
            - name: checkout
              uses: actions/checkout@v3

            - name: download dependency    
              uses: actions/setup-java@v3
              with:
                distribution: 'temurin' 
                java-version: '17'

            - name: pacakge the code
              run: mvn clean install -DskipTests
     test:
        needs: build
        runs-on: ubuntu-latest
        steps:        
            - name: test the code  
              run: mvn test


                  
